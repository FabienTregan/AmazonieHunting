<head>
    <meta name='viewport' content='width=device-width,user-scalable=no'>
    <meta charset="utf-8" />

    <script src="../lib/wideScreen.js"></script>

    <style>
        @import '../lib/wideScreen.css';
        @import '../lib/clickArea.css';

        @font-face {
            font-family: 'Source Sans';
            src: url('../font/SourceSansPro-Regular.otf') format('woff');
        }

        body {
            font-family: 'Source Sans';
            color: white;
        }

        .background {
            height: 100%;
            width: 100%;
        }

        #images {
            position: absolute;
            left: 19.22%;
            top: 16.67%;
            width: 61.61%;
            height: 68.60%;

            overflow: hidden;
        }

        #scroller {
            height: 100%;
            position: absolute;
            display: flex;
            flex-direction: line;
            flex-wrap: nowrap;
            left: 0;

            transition: left 0.5s ease-in-out;
        }

        #images img {
            height: 100%;
            width: 100%;
            outline: solid transparent;
            border-width: 0 0.5em 0 0.5em;
        }

        #legend {
            position: absolute;
            left: 0;
            top: 88.88%;
            width: 100%;
            height: 20%;
            text-align: center;
        }
    </style>
</head>

<body oncontextmenu='event.preventDefault()'>

    <div id="main" class="wideScreen">

        <img class="background" src="index.jpg" />

        <div id="images">
            <div id="scroller">
            </div>
        </div>

        <div id="legend">blabla bla blablabal<br>bli bla</div>

        <div class="clickArea" style="top: 17%; left: 0.5%; width: 20%; height: 67%;" onclick="change(-1)"></div>
        <div class="clickArea" style="top: 17%; left: 80%; width: 20%; height: 67%;" onclick="change(+1)"></div>
        <div class="clickArea" style="top: 87%; left: 89.5%; width: 6.5%; height: 7%;" onclick="window.location.href='../village'"></div>

    </div>

    <script>

        var NB_IMAGES = 4
        var currentImageNumber = 1

        var content = [
            { src: "image1.jpg", legend: "blabla A" }
            , { src: "image2.jpg", legend: "blabla B" }
            , { src: "image3.jpg", legend: "blabla C" }
            , { src: "image4.jpg", legend: "blabla D" }
        ]

        function change(n) {

            currentImageNumber += n
            if (currentImageNumber > NB_IMAGES) { currentImageNumber = 1 }
            if (currentImageNumber < 1) { currentImageNumber = NB_IMAGES }

            show(currentImageNumber)
        }

        function show(n) {

            var scroller = document.getElementById("scroller")
            var image = document.querySelectorAll("#images img")[n - 1]
            var imageOffestLeft = image.offsetLeft

            scroller.style.left = (-imageOffestLeft) + "px"

            legend(n)
        }

        function legend(n) {
            var legend = document.getElementById("legend")
            legend.innerHTML = content[n-1].legend
        }

        function initContent() {

            var scroller = document.getElementById("scroller")

            for (var i = 0; i < content.length; i++) {
                var image = document.createElement("img")
                image.src = content[i].src
                scroller.appendChild(image)
            }

        }

        initContent()
        show(1)
    </script>
</body>